language: node_js
node_js:
  - "8.9.4"

branches:
  only:
    - master
    - dev

before_script:
  - npm install -g ionic cordova jest

notifications:
  webhooks:
    urls:
      - https://hooks.glip.com/webhook/6d688e2d-f076-4521-8213-f2479e99afe6
    on_success: change # default: always
    on_failure: always # default: always
    on_start: change   # default: never

script:
  - npm run test-ci

deploy:
  provider: heroku
  api_key:
    secure: "H9cs2JrRioukvFUsTLT8Bd54FM3cIuMi7UlABDxgmUjmxx0MUOVPTJCLU0gH9N5vV5BXc+TF9KG3btI/vlEtKMtiGdW59kBZQCLBNqCBYb0Wp3cSRObeT/45XkH79+4G2+6lCZdjDLoSdk4fM3o9Aw5PZGQDXRNqRlOPo5sjVRLbucPcIhuPV5GewZCV+F5L2yd2i2W6iFIIueh00Iuj0Q/oay2ToNqcdkrym7/wiF52aDSNn01yyrT8CqfCchssOlE6AyM71Rb4i937PMunfLaExHl+LW0cKZ37KMCPUS+bonh2v4YFavml8OphQYe+sU7WoZ7o9brBfCDO2JovBdYGCv8L4F3U0YFo0iMqO9gy0x/g8ko8aSqtWRflzJm5m8kXs3L5NbM1pOREW8yA3p89agP9rF2i0U4Drew2w5lG9cQOFG5IYhPkSZXALdJoDzsLPg0onLAzJjnQttem8uhzXRnsozJbnZiw1VRhF1D5CiyZM0Trz8iVI4nV6cUduMDJkNnvxbjSkqsXbxis4cqQwF9yJJMJFuXKHXN/wH+eQLvX4TJR9n3NtaDcIzq3ddItJpFZz/tHkvJ+C4Sk0fbeggpdRWw21kdQ5ZTejbXtXS3xtTAEr3DKN4r0Bo55EZvSONH0x6MB3MqkrZN6vbMW0fsLVvCwZP6jFQRQgJs="
  app: ssf-reboot
  on:
    repo: SoftStackFactory/reboot  